(this["webpackJsonpvapaat-tennisvuorot"]=this["webpackJsonpvapaat-tennisvuorot"]||[]).push([[0],{183:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),i=t(48),o=t.n(i),l=(t(99),t(31)),u=t(60),c=(t(100),t(120)),s=t(184),m=t(91),d=t.n(m),v=t(189),f=t(191),p=t(18),h=["06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00"],y=function(e){var a=e.onChange,t=e.from,n=e.to,i=r.a.useState(t),o=Object(l.a)(i,2),u=o[0],c=o[1],s=r.a.useState(n),m=Object(l.a)(s,2),d=m[0],y=m[1];return r.a.useEffect((function(){a([u,d])}),[u,d,a]),r.a.createElement(v.a,{align:"center",justify:"center",w:"240px"},r.a.createElement(f.a,{size:"sm",value:u,onChange:function(e){return c(e.target.value)},iconSize:"0",w:"55px",p:"0.1rem",style:{textAlignLast:"center"}},h.slice(0,-1).filter((function(e){return e<d})).map((function(e){return r.a.createElement("option",{value:e,key:e},e)}))),r.a.createElement(p.a,{mx:"5px"},"-"),r.a.createElement(f.a,{size:"sm",value:d,onChange:function(e){return y(e.target.value)},iconSize:"0",w:"55px",p:"0.1rem",style:{textAlignLast:"center"}},h.slice(1).filter((function(e){return e>u})).map((function(e){return r.a.createElement("option",{value:e,key:e},e)}))))},b=t(190),E=t(90),g=t.n(E).a.create({timeout:5e3}),k=new URLSearchParams(window.location.search),w=k.get("start"),j=k.get("end"),x=k.get("date")&&Object(c.default)(k.get("date"));var I=function(){var e=r.a.useState(),a=Object(l.a)(e,2),t=a[0],n=a[1],i=r.a.useState(function(e){var a=new Date;return e?e<a?a:e:a}(x)),o=Object(l.a)(i,2),c=o[0],m=o[1],v=r.a.useState([w||"06:00",j||"22:00"]),f=Object(l.a)(v,2),h=Object(l.a)(f[0],2),E=h[0],k=h[1],I=f[1],O=r.a.useState([]),S=Object(l.a)(O,2),C=S[0],H=S[1];r.a.useEffect((function(){g.get("https://vapaat-pelivuorot.fly.dev/api/available-hours").then((function(e){return n(e.data)}))}),[]),r.a.useEffect((function(){H(function(e,a){if(!e)return[];var t=e.availableHours.reduce((function(e,a){return e[a.day]?(e[a.day]=[].concat(Object(u.a)(e[a.day]),[a]),e):(e[a.day]=[a],e)}),{})[Object(s.default)(a,"yyyy-MM-dd")];if(!t)return[];var n=t.filter((function(e){return["INSIDE","INFLATED"].includes(e.courtType)&&!e.thirtyMinutes})).reduce((function(a,t){return a[t.hallId]?(a[t.hallId].availableHours=Object(u.a)(new Set([].concat(Object(u.a)(a[t.hallId].availableHours),[t.hour]))),a):(a[t.hallId]={name:e.halls.find((function(e){return e.id===t.hallId})).name,availableHours:[t.hour],link:t.link},a)}),{});return e.halls.slice().sort((function(e,a){var t=e.name.toUpperCase(),n=a.name.toUpperCase();return t<n?-1:t>n?1:0})).map((function(e){var a,t,r,i;return{name:e.name,availableHours:null!==(a=null===(t=n[e.id])||void 0===t?void 0:t.availableHours)&&void 0!==a?a:[],link:null!==(r=null===(i=n[e.id])||void 0===i?void 0:i.link)&&void 0!==r?r:e.link}}))}(t,c))}),[H,c,t]),r.a.useEffect((function(){var e;window.history.pushState("","","/vapaat-tennisvuorot/?date=".concat((e=c,Object(s.default)(e,"yyyy-MM-dd")),"&start=").concat(E,"&end=").concat(k))}),[c,E,k]);var z=r.a.useCallback((function(e){return I(e)}),[]);return r.a.createElement("div",{style:{maxWidth:"100%",padding:"10px"}},r.a.createElement(b.a,{mb:"2rem"},"Vapaat tennisvuorot"),r.a.createElement(d.a,{selected:c,onChange:function(e){m(e),H([])},minDate:new Date,inline:!0}),r.a.createElement(y,{onChange:z,from:E,to:k}),C.length>0?C.map((function(e){return r.a.createElement("div",{key:e.name},r.a.createElement("a",{href:e.link,target:"_blank",rel:"noopener noreferrer"},r.a.createElement(b.a,{size:"sm",my:"1rem"},e.name)),e.error?r.a.createElement("h2",null,"Virhe vuorojen latauksessa."):function(e,a,t){var n=e.availableHours.filter((function(e){return parseInt(e)>=parseInt(a)&&parseInt(e)<=parseInt(t)})).map((function(a){return r.a.createElement("a",{href:e.link,key:a,target:"_blank",rel:"noopener noreferrer"},r.a.createElement("span",{style:{display:"inline-block",margin:"5px",border:"solid",borderWidth:"1px",padding:"3px"}},a))}));return n.length>0?n:r.a.createElement(p.a,null,"Ei vapaita vuoroja.")}(e,E,k))})):r.a.createElement("div",{style:{marginTop:"20px"}},r.a.createElement("h2",null,t?"Valittu p\xe4iv\xe4m\xe4\xe4r\xe4 ylitt\xe4\xe4 kaksi viikkoa nykyhetkest\xe4, katso vapaat ajat hallien sivuilta":"Ladataan vapaita vuoroja...")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var O=t(93),S=t(192);o.a.render(r.a.createElement(O.a,null,r.a.createElement(S.a,null),r.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},94:function(e,a,t){e.exports=t(183)},99:function(e,a,t){}},[[94,1,2]]]);
//# sourceMappingURL=main.25391e08.chunk.js.map