(this["webpackJsonpvapaat-tennisvuorot"]=this["webpackJsonpvapaat-tennisvuorot"]||[]).push([[0],{180:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(49),c=n.n(o),i=(n(98),n(13)),u=n.n(i),s=n(21),l=n(37),p=(n(100),n(86)),f=n.n(p),m=function(e){return f.a.get("https://api.allorigins.win/get?url=".concat(encodeURIComponent(e)))},d=n(25),v=n.n(d),k=n(182),g=n(118),h=function(){var e=Object(s.a)(u.a.mark((function e(t){var n,a,r,o,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(k.default)(Object(g.default)(t,1),"yyyy-MM-dd"),a="https://varaukset.talintenniskeskus.fi/booking/booking-calendar?BookingCalForm%5Bp_laji%5D=1&BookingCalForm%5Bp_pvm%5D=".concat(n,"&BookingCalForm%5Bp_pvm_interval%5D=1&BookingCalForm%5Bp_pvm_custom%5D=Sunnuntai+08.03.2020"),e.next=4,m(a);case 4:return r=e.sent,o=r.data.contents,c=v()(o).find("a[class=time-link]").map((function(e,t){return v()(t).text()})).get(),e.abrupt("return",{name:"Talin Tenniskeskus",availableHours:c,link:a});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=n(46),y=function(){var e=Object(s.a)(u.a.mark((function e(t){var n,a,r,o,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(k.default)(Object(b.default)(t,1),"yyyy-MM-dd"),a="https://meilahti.slsystems.fi/booking/booking-calendar?BookingCalForm%5Bp_laji%5D=1&BookingCalForm%5Bp_pvm%5D=".concat(n,"&BookingCalForm%5Bp_pvm_interval%5D=-1&BookingCalForm%5Bp_pvm_custom%5D=Maanantai+09.03.2020"),e.next=4,m(a);case 4:return r=e.sent,o=r.data.contents,c=v()(o).find("a[class=time-link]").map((function(e,t){return v()(t).text()})).get(),e.abrupt("return",{name:"Meilahden liikuntakeskus",availableHours:c,link:a});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(s.a)(u.a.mark((function e(t){var n,a,r,o,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(k.default)(t,"yyyy-MM-dd"),a="https://varaukset.talintenniskeskus.fi/booking/booking-calendar?BookingCalForm%5Bp_laji%5D=5&BookingCalForm%5Bp_pvm%5D=".concat(n,"&BookingCalForm%5Bp_pvm_interval%5D=&BookingCalForm%5Bp_pvm_custom%5D=Sunnuntai+15.03.2020"),e.next=4,m(a);case 4:return r=e.sent,o=r.data.contents,c=v()(o).find("a[class=time-link]").map((function(e,t){return v()(t).text()})).get(),e.abrupt("return",{name:"Taivallahti",availableHours:c,link:a});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(s.a)(u.a.mark((function e(t){var n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(t);case 2:return n=e.sent,a=n.data.contents,r=v()(a).find("tr[class=state_R],tr[class=state_F]").filter((function(e,t){return v()(t).find('td[class="state_white res_success"]').length>0})).map((function(e,t){return console.log(t),v()(t).text().split(" - ")[0]})).get(),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j={esport1:function(){var e=Object(s.a)(u.a.mark((function e(t){var n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(k.default)(t,"dd.MM.yyyy"),a="https://varaus.esportcenter.fi/varaus/index.php?func=mod_rc_v2&pageId=3&cdate=".concat(n),e.next=4,x(a);case 4:return r=e.sent,e.abrupt("return",{name:"Esport Center Tapiola 1-8",availableHours:r,link:a});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),esport2:function(){var e=Object(s.a)(u.a.mark((function e(t){var n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(k.default)(t,"dd.MM.yyyy"),a="https://varaus.esportcenter.fi/varaus/index.php?func=mod_rc_v2&pageId=4&cdate=".concat(n),e.next=4,x(a);case 4:return r=e.sent,e.abrupt("return",{name:"Esport Center Tapiola 10-14",availableHours:r,link:a});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},E=function(){var e=Object(s.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([h(t),y(t),w(t),j.esport1(t),j.esport2(t)]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=n(121),B=n(90),O=n.n(B),C=n(186),D=n(188),M=n(19),F=["06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00"],S=function(e){var t=e.onChange,n=e.from,a=e.to,o=r.a.useState(n),c=Object(l.a)(o,2),i=c[0],u=c[1],s=r.a.useState(a),p=Object(l.a)(s,2),f=p[0],m=p[1];return r.a.useEffect((function(){t([i,f])}),[i,f,t]),r.a.createElement(C.a,{align:"center",justify:"center",w:"240px"},r.a.createElement(D.a,{size:"sm",value:i,onChange:function(e){return u(e.target.value)},iconSize:"0",w:"55px",p:"0.1rem",style:{textAlignLast:"center"}},F.slice(0,-1).filter((function(e){return e<f})).map((function(e){return r.a.createElement("option",{value:e,key:e},e)}))),r.a.createElement(M.a,{mx:"5px"},"-"),r.a.createElement(D.a,{size:"sm",value:f,onChange:function(e){return m(e.target.value)},iconSize:"0",w:"55px",p:"0.1rem",style:{textAlignLast:"center"}},F.slice(1).filter((function(e){return e>i})).map((function(e){return r.a.createElement("option",{value:e,key:e},e)}))))},I=n(187),H=new URLSearchParams(window.location.search),T=H.get("start"),z=H.get("end"),L=H.get("date")&&Object(_.default)(H.get("date"));var W=function(){var e=r.a.useState(L||new Date),t=Object(l.a)(e,2),n=t[0],a=t[1],o=r.a.useState([T||"06:00",z||"22:00"]),c=Object(l.a)(o,2),i=Object(l.a)(c[0],2),p=i[0],f=i[1],m=c[1],d=r.a.useState([]),v=Object(l.a)(d,2),g=v[0],h=v[1];r.a.useEffect((function(){function e(){return(e=Object(s.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=h,e.next=3,E(t);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(t){e.apply(this,arguments)}(n)}),[h,n]),r.a.useEffect((function(){var e;window.history.pushState("","","/vapaat-tennisvuorot/?date=".concat((e=n,Object(k.default)(e,"yyyy-MM-dd")),"&start=").concat(p,"&end=").concat(f))}),[n,p,f]);var b=r.a.useCallback((function(e){return m(e)}),[]);return r.a.createElement("div",{style:{maxWidth:"100%",padding:"10px"}},r.a.createElement(I.a,{mb:"2rem"},"Vapaat tennisvuorot"),r.a.createElement(O.a,{selected:n,onChange:function(e){a(e),h([])},minDate:new Date,inline:!0}),r.a.createElement(S,{onChange:b,from:p,to:f}),g.length>0?g.map((function(e){return r.a.createElement("div",{key:e.name},r.a.createElement("a",{href:e.link,target:"_blank",rel:"noopener noreferrer"},r.a.createElement(I.a,{size:"sm",my:"1rem"},e.name)),function(e,t,n){var a=e.availableHours.filter((function(e){return parseInt(e)>=parseInt(t)&&parseInt(e)<=parseInt(n)})).map((function(t){return r.a.createElement("a",{href:e.link,key:t,target:"_blank",rel:"noopener noreferrer"},r.a.createElement("span",{style:{display:"inline-block",margin:"5px",border:"solid",borderWidth:"1px",padding:"3px"}},t))}));return a.length>0?a:r.a.createElement(M.a,null,"Ei vapaita vuoroja.")}(e,p,f))})):r.a.createElement("div",{style:{marginTop:"20px"}},r.a.createElement("h2",null,"Ladataan vapaita vuoroja...")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var R=n(92),A=n(189);c.a.render(r.a.createElement(R.a,null,r.a.createElement(A.a,null),r.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},93:function(e,t,n){e.exports=n(180)},98:function(e,t,n){}},[[93,1,2]]]);
//# sourceMappingURL=main.57ee396f.chunk.js.map