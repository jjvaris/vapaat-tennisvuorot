(this["webpackJsonpvapaat-tennisvuorot"]=this["webpackJsonpvapaat-tennisvuorot"]||[]).push([[0],{180:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(48),i=n.n(o),c=(n(98),n(23)),u=n.n(c),l=n(34),s=n(36),p=(n(100),n(49)),m=n.n(p),f=n(45),d=n.n(f),v=n(182),g=n(118),k=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,a,r,o,i,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(v.default)(Object(g.default)(t,1),"yyyy-MM-dd"),a="https://varaukset.talintenniskeskus.fi/booking/booking-calendar?BookingCalForm%5Bp_laji%5D=1&BookingCalForm%5Bp_pvm%5D=".concat(n,"&BookingCalForm%5Bp_pvm_interval%5D=1&BookingCalForm%5Bp_pvm_custom%5D=Sunnuntai+08.03.2020"),r="https://api.allorigins.win/get?url=".concat(encodeURIComponent(a)),e.next=5,m.a.get(r);case 5:return o=e.sent,i=o.data.contents,c=d()(i).find("a[class=time-link]").map((function(e,t){return d()(t).text()})).get(),e.abrupt("return",{name:"Talin Tenniskeskus",availableHours:c,link:a});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=n(46),b=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,a,r,o,i,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(v.default)(Object(h.default)(t,1),"yyyy-MM-dd"),a="https://meilahti.slsystems.fi/booking/booking-calendar?BookingCalForm%5Bp_laji%5D=1&BookingCalForm%5Bp_pvm%5D=".concat(n,"&BookingCalForm%5Bp_pvm_interval%5D=-1&BookingCalForm%5Bp_pvm_custom%5D=Maanantai+09.03.2020"),r="https://api.allorigins.win/get?url=".concat(encodeURIComponent(a)),e.next=5,m.a.get(r);case 5:return o=e.sent,i=o.data.contents,c=d()(i).find("a[class=time-link]").map((function(e,t){return d()(t).text()})).get(),e.abrupt("return",{name:"Meilahden liikuntakeskus",availableHours:c,link:a});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([k(t),b(t)]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=n(121),E=n(90),x=n.n(E),j=n(186),B=n(188),C=n(18),O=["06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00"],_=function(e){var t=e.onChange,n=e.from,a=e.to,o=r.a.useState(n),i=Object(s.a)(o,2),c=i[0],u=i[1],l=r.a.useState(a),p=Object(s.a)(l,2),m=p[0],f=p[1];return r.a.useEffect((function(){t([c,m])}),[c,m,t]),r.a.createElement(j.a,{align:"center",justify:"center",w:"240px"},r.a.createElement(B.a,{size:"sm",value:c,onChange:function(e){return u(e.target.value)},iconSize:"0",w:"55px",p:"0.1rem",style:{textAlignLast:"center"}},O.slice(0,-1).filter((function(e){return e<m})).map((function(e){return r.a.createElement("option",{value:e,key:e},e)}))),r.a.createElement(C.a,{mx:"5px"},"-"),r.a.createElement(B.a,{size:"sm",value:m,onChange:function(e){return f(e.target.value)},iconSize:"0",w:"55px",p:"0.1rem",style:{textAlignLast:"center"}},O.slice(1).filter((function(e){return e>c})).map((function(e){return r.a.createElement("option",{value:e,key:e},e)}))))},D=n(187),S=new URLSearchParams(window.location.search),F=S.get("start"),M=S.get("end"),I=S.get("date")&&Object(w.default)(S.get("date"));var z=function(){var e=r.a.useState(I||new Date),t=Object(s.a)(e,2),n=t[0],a=t[1],o=r.a.useState([F||"06:00",M||"22:00"]),i=Object(s.a)(o,2),c=Object(s.a)(i[0],2),p=c[0],m=c[1],f=i[1],d=r.a.useState([]),g=Object(s.a)(d,2),k=g[0],h=g[1];r.a.useEffect((function(){function e(){return(e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=h,e.next=3,y(t);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(t){e.apply(this,arguments)}(n)}),[h,n]),r.a.useEffect((function(){var e;window.history.pushState("","","/vapaat-tennisvuorot/?date=".concat((e=n,Object(v.default)(e,"yyyy-MM-dd")),"&start=").concat(p,"&end=").concat(m))}),[n,p,m]);var b=r.a.useCallback((function(e){return f(e)}),[]);return r.a.createElement("div",{style:{maxWidth:"100%",padding:"10px"}},r.a.createElement(D.a,{mb:"2rem"},"Vapaat tennisvuorot"),r.a.createElement(x.a,{selected:n,onChange:function(e){a(e),h([])},minDate:new Date,inline:!0}),r.a.createElement(_,{onChange:b,from:p,to:m}),k.length>0?k.map((function(e){return r.a.createElement("div",{key:e.name},r.a.createElement("a",{href:e.link,target:"_blank",rel:"noopener noreferrer"},r.a.createElement(D.a,{size:"sm",my:"1rem"},e.name)),function(e,t,n){var a=e.availableHours.filter((function(e){return parseInt(e)>=parseInt(t)&&parseInt(e)<=parseInt(n)})).map((function(t){return r.a.createElement("a",{href:e.link,key:t,target:"_blank",rel:"noopener noreferrer"},r.a.createElement("span",{style:{display:"inline-block",margin:"5px",border:"solid",borderWidth:"1px",padding:"3px"}},t))}));return a.length>0?a:r.a.createElement(C.a,null,"Ei vapaita vuoroja.")}(e,p,m))})):r.a.createElement("div",{style:{marginTop:"20px"}},r.a.createElement("h2",null,"Ladataan vapaita vuoroja...")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var L=n(92),W=n(189);i.a.render(r.a.createElement(L.a,null,r.a.createElement(W.a,null),r.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},93:function(e,t,n){e.exports=n(180)},98:function(e,t,n){}},[[93,1,2]]]);
//# sourceMappingURL=main.0a0db616.chunk.js.map