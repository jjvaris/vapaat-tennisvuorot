(this["webpackJsonpvapaat-tennisvuorot"]=this["webpackJsonpvapaat-tennisvuorot"]||[]).push([[0],{181:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),o=n(50),i=n.n(o),c=(n(99),n(8)),s=n.n(c),u=n(18),l=n(37),p=(n(101),n(87)),f=n.n(p).a.create({timeout:5e3}),m=function(t){return f.get("https://api.allorigins.win/get?url=".concat(encodeURIComponent(t)))},v=n(11),d=n.n(v),h=n(183),k=n(119),g=function(){var t=Object(u.a)(s.a.mark((function t(e){var n,a,r,o,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(h.default)(Object(k.default)(e,1),"yyyy-MM-dd"),a="https://varaukset.talintenniskeskus.fi/booking/booking-calendar?BookingCalForm%5Bp_laji%5D=1&BookingCalForm%5Bp_pvm%5D=".concat(n,"&BookingCalForm%5Bp_pvm_interval%5D=1&BookingCalForm%5Bp_pvm_custom%5D=Sunnuntai+08.03.2020"),t.next=4,m(a);case 4:return r=t.sent,o=r.data.contents,i=d()(d.a.parseHTML(o)).find("a[class=time-link]").map((function(t,e){return d()(e).text()})).get(),t.abrupt("return",{name:"Talin Tenniskeskus",availableHours:i,link:a});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),b=n(48),y=function(){var t=Object(u.a)(s.a.mark((function t(e){var n,a,r,o,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(h.default)(Object(b.default)(e,1),"yyyy-MM-dd"),a="https://meilahti.slsystems.fi/booking/booking-calendar?BookingCalForm%5Bp_laji%5D=1&BookingCalForm%5Bp_pvm%5D=".concat(n,"&BookingCalForm%5Bp_pvm_interval%5D=-1&BookingCalForm%5Bp_pvm_custom%5D=Maanantai+09.03.2020"),t.next=4,m(a);case 4:return r=t.sent,o=r.data.contents,i=d()(d.a.parseHTML(o)).find("a[class=time-link]").map((function(t,e){return d()(e).text()})).get(),t.abrupt("return",{name:"Meilahden liikuntakeskus",availableHours:i,link:a});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),B=function(){var t=Object(u.a)(s.a.mark((function t(e){var n,a,r,o,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(h.default)(e,"yyyy-MM-dd"),a="https://varaukset.talintenniskeskus.fi/booking/booking-calendar?BookingCalForm%5Bp_laji%5D=5&BookingCalForm%5Bp_pvm%5D=".concat(n,"&BookingCalForm%5Bp_pvm_interval%5D=&BookingCalForm%5Bp_pvm_custom%5D=Sunnuntai+15.03.2020"),t.next=4,m(a);case 4:return r=t.sent,o=r.data.contents,i=d()(d.a.parseHTML(o)).find("a[class=time-link]").map((function(t,e){return d()(e).text()})).get(),t.abrupt("return",{name:"Taivallahti",availableHours:i,link:a});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),w=function(){var t=Object(u.a)(s.a.mark((function t(e){var n,a,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m(e);case 2:return n=t.sent,a=n.data.contents,r=d()(d.a.parseHTML(a)).find("tr[class=state_R],tr[class=state_F]").filter((function(t,e){return d()(e).find('td[class="state_white res_success"]').length>0})).map((function(t,e){return d()(e).text().split(" - ")[0]})).get(),t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),x={esport1:function(){var t=Object(u.a)(s.a.mark((function t(e){var n,a,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(h.default)(e,"dd.MM.yyyy"),a="https://varaus.esportcenter.fi/varaus/index.php?func=mod_rc_v2&pageId=3&cdate=".concat(n),t.next=4,w(a);case 4:return r=t.sent,t.abrupt("return",{name:"Esport Center Tapiola 1-8",availableHours:r,link:a});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),esport2:function(){var t=Object(u.a)(s.a.mark((function t(e){var n,a,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(h.default)(e,"dd.MM.yyyy"),a="https://varaus.esportcenter.fi/varaus/index.php?func=mod_rc_v2&pageId=4&cdate=".concat(n),t.next=4,w(a);case 4:return r=t.sent,t.abrupt("return",{name:"Esport Center Tapiola 10-14",availableHours:r,link:a});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},j=n(46),_=function(){var t=Object(u.a)(s.a.mark((function t(e){var n,a,r,o,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(h.default)(e,"yyyy-MM-dd"),a="https://smashcenter.slsystems.fi/booking/booking-calendar?BookingCalForm%5Bp_laji%5D=1&BookingCalForm%5Bp_pvm%5D=".concat(n,"&BookingCalForm%5Bp_pvm_interval%5D=&BookingCalForm%5Bp_calmode%5D=2&BookingCalForm%5Bp_pvm_custom%5D=Torstai+12.03.2020"),t.next=4,m(a);case 4:return r=t.sent,o=r.data.contents,i=d()(d.a.parseHTML(o)).find('td[class="s-avail"]').map((function(t,e){return d()(e).text().trim()})).get().filter((function(t){return t.startsWith("K")})).filter((function(t){return!t.startsWith("K14")})).map((function(t){var e=t.split(":");return"".concat(e[0].substring(e[0].length-2),":").concat(e[1].substring(0,2))})),t.abrupt("return",{name:"Smash Center Helsinki",availableHours:Object(j.a)(new Set(i)),link:a});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),C=function(){var t=Object(u.a)(s.a.mark((function t(e){var n,a,r,o,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(h.default)(e,"yyyy-MM-dd"),a="https://smashcenter.slsystems.fi/booking/booking-calendar?BookingCalForm%5Bp_laji%5D=7&BookingCalForm%5Bp_pvm%5D=".concat(n,"&BookingCalForm%5Bp_pvm_interval%5D=&BookingCalForm%5Bp_calmode%5D=2&BookingCalForm%5Bp_pvm_custom%5D=Lauantai+14.03.2020"),t.next=4,m(a);case 4:return r=t.sent,o=r.data.contents,i=d()(d.a.parseHTML(o)).find('td[class="s-avail"]').map((function(t,e){return d()(e).text().trim()})).get().filter((function(t){return t.startsWith("T")})).map((function(t){var e=t.split(":");return"".concat(e[0].substring(e[0].length-2),":").concat(e[1].substring(0,2))})),t.abrupt("return",{name:"Smash Center Olari",availableHours:Object(j.a)(new Set(i)),link:a});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),O=function(){var t=Object(u.a)(s.a.mark((function t(e){var n,a,r,o,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(h.default)(e,"yyyy-MM-dd"),a="https://vj.slsystems.fi/tennispuisto/ftpages/ft-varaus-table-01.php?laji=1&pvm=".concat(n,"&goto=0"),t.next=4,m(a);case 4:return r=t.sent,o=r.data.contents,i=d()(d.a.parseHTML(o)).find("a").map((function(t,e){return d()(e).attr("href").split("klo=")[1].substring(0,5)})).get(),t.abrupt("return",{name:"Tapiolan Tennispuisto",availableHours:Object(j.a)(new Set(i)),link:a});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),E=function(t){return function(e){return{name:t,error:!0}}},M=function(){var t=Object(u.a)(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([g(e).catch(E("Talin Tenniskeskus")),B(e).catch(E("Taivallahti")),y(e).catch(E("Meilahden liikuntakeskus")),x.esport1(e).catch(E("Esport Center Tapiola 1-8")),x.esport2(e).catch(E("Esport Center Tapiola 10-14")),O(e).catch(E("Tapiolan Tennispuisto")),_(e).catch(E("Smash Center Helsink")),C(e)]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),D=n(122),T=n(91),F=n.n(T),H=n(187),S=n(189),L=n(21),I=["06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00"],W=function(t){var e=t.onChange,n=t.from,a=t.to,o=r.a.useState(n),i=Object(l.a)(o,2),c=i[0],s=i[1],u=r.a.useState(a),p=Object(l.a)(u,2),f=p[0],m=p[1];return r.a.useEffect((function(){e([c,f])}),[c,f,e]),r.a.createElement(H.a,{align:"center",justify:"center",w:"240px"},r.a.createElement(S.a,{size:"sm",value:c,onChange:function(t){return s(t.target.value)},iconSize:"0",w:"55px",p:"0.1rem",style:{textAlignLast:"center"}},I.slice(0,-1).filter((function(t){return t<f})).map((function(t){return r.a.createElement("option",{value:t,key:t},t)}))),r.a.createElement(L.a,{mx:"5px"},"-"),r.a.createElement(S.a,{size:"sm",value:f,onChange:function(t){return m(t.target.value)},iconSize:"0",w:"55px",p:"0.1rem",style:{textAlignLast:"center"}},I.slice(1).filter((function(t){return t>c})).map((function(t){return r.a.createElement("option",{value:t,key:t},t)}))))},z=n(188),R=new URLSearchParams(window.location.search),A=R.get("start"),J=R.get("end"),K=R.get("date")&&Object(D.default)(R.get("date"));var P=function(){var t=r.a.useState(function(t){var e=new Date;return t?t<e?e:t:e}(K)),e=Object(l.a)(t,2),n=e[0],a=e[1],o=r.a.useState([A||"06:00",J||"22:00"]),i=Object(l.a)(o,2),c=Object(l.a)(i[0],2),p=c[0],f=c[1],m=i[1],v=r.a.useState([]),d=Object(l.a)(v,2),k=d[0],g=d[1];r.a.useEffect((function(){function t(){return(t=Object(u.a)(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=g,t.next=3,M(e);case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(e){t.apply(this,arguments)}(n)}),[g,n]),r.a.useEffect((function(){var t;window.history.pushState("","","/vapaat-tennisvuorot/?date=".concat((t=n,Object(h.default)(t,"yyyy-MM-dd")),"&start=").concat(p,"&end=").concat(f))}),[n,p,f]);var b=r.a.useCallback((function(t){return m(t)}),[]);return r.a.createElement("div",{style:{maxWidth:"100%",padding:"10px"}},r.a.createElement(z.a,{mb:"2rem"},"Vapaat tennisvuorot"),r.a.createElement(F.a,{selected:n,onChange:function(t){a(t),g([])},minDate:new Date,inline:!0}),r.a.createElement(W,{onChange:b,from:p,to:f}),k.length>0?k.map((function(t){return r.a.createElement("div",{key:t.name},r.a.createElement("a",{href:t.link,target:"_blank",rel:"noopener noreferrer"},r.a.createElement(z.a,{size:"sm",my:"1rem"},t.name)),t.error?r.a.createElement("h2",null,"Virhe vuorojen latauksessa."):function(t,e,n){var a=t.availableHours.filter((function(t){return parseInt(t)>=parseInt(e)&&parseInt(t)<=parseInt(n)})).map((function(e){return r.a.createElement("a",{href:t.link,key:e,target:"_blank",rel:"noopener noreferrer"},r.a.createElement("span",{style:{display:"inline-block",margin:"5px",border:"solid",borderWidth:"1px",padding:"3px"}},e))}));return a.length>0?a:r.a.createElement(L.a,null,"Ei vapaita vuoroja.")}(t,p,f))})):r.a.createElement("div",{style:{marginTop:"20px"}},r.a.createElement("h2",null,"Ladataan vapaita vuoroja...")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var U=n(93),V=n(190);i.a.render(r.a.createElement(U.a,null,r.a.createElement(V.a,null),r.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},94:function(t,e,n){t.exports=n(181)},99:function(t,e,n){}},[[94,1,2]]]);
//# sourceMappingURL=main.4d4f35b3.chunk.js.map