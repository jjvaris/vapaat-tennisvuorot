(this["webpackJsonpvapaat-tennisvuorot"]=this["webpackJsonpvapaat-tennisvuorot"]||[]).push([[0],{181:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),o=n(49),i=n.n(o),c=(n(99),n(13)),u=n.n(c),s=n(19),l=n(37),p=(n(101),n(86)),m=n.n(p),f=function(t){return m.a.get("https://api.allorigins.win/get?url=".concat(encodeURIComponent(t)))},d=n(20),v=n.n(d),k=n(183),g=n(119),h=function(){var t=Object(s.a)(u.a.mark((function t(e){var n,a,r,o,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(k.default)(Object(g.default)(e,1),"yyyy-MM-dd"),a="https://varaukset.talintenniskeskus.fi/booking/booking-calendar?BookingCalForm%5Bp_laji%5D=1&BookingCalForm%5Bp_pvm%5D=".concat(n,"&BookingCalForm%5Bp_pvm_interval%5D=1&BookingCalForm%5Bp_pvm_custom%5D=Sunnuntai+08.03.2020"),t.next=4,f(a);case 4:return r=t.sent,o=r.data.contents,i=v()(o).find("a[class=time-link]").map((function(t,e){return v()(e).text()})).get(),t.abrupt("return",{name:"Talin Tenniskeskus",availableHours:i,link:a});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),b=n(47),y=function(){var t=Object(s.a)(u.a.mark((function t(e){var n,a,r,o,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(k.default)(Object(b.default)(e,1),"yyyy-MM-dd"),a="https://meilahti.slsystems.fi/booking/booking-calendar?BookingCalForm%5Bp_laji%5D=1&BookingCalForm%5Bp_pvm%5D=".concat(n,"&BookingCalForm%5Bp_pvm_interval%5D=-1&BookingCalForm%5Bp_pvm_custom%5D=Maanantai+09.03.2020"),t.next=4,f(a);case 4:return r=t.sent,o=r.data.contents,i=v()(o).find("a[class=time-link]").map((function(t,e){return v()(e).text()})).get(),t.abrupt("return",{name:"Meilahden liikuntakeskus",availableHours:i,link:a});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),w=function(){var t=Object(s.a)(u.a.mark((function t(e){var n,a,r,o,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(k.default)(e,"yyyy-MM-dd"),a="https://varaukset.talintenniskeskus.fi/booking/booking-calendar?BookingCalForm%5Bp_laji%5D=5&BookingCalForm%5Bp_pvm%5D=".concat(n,"&BookingCalForm%5Bp_pvm_interval%5D=&BookingCalForm%5Bp_pvm_custom%5D=Sunnuntai+15.03.2020"),t.next=4,f(a);case 4:return r=t.sent,o=r.data.contents,i=v()(o).find("a[class=time-link]").map((function(t,e){return v()(e).text()})).get(),t.abrupt("return",{name:"Taivallahti",availableHours:i,link:a});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),x=function(){var t=Object(s.a)(u.a.mark((function t(e){var n,a,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f(e);case 2:return n=t.sent,a=n.data.contents,r=v()(a).find("tr[class=state_R],tr[class=state_F]").filter((function(t,e){return v()(e).find('td[class="state_white res_success"]').length>0})).map((function(t,e){return v()(e).text().split(" - ")[0]})).get(),t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),B={esport1:function(){var t=Object(s.a)(u.a.mark((function t(e){var n,a,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(k.default)(e,"dd.MM.yyyy"),a="https://varaus.esportcenter.fi/varaus/index.php?func=mod_rc_v2&pageId=3&cdate=".concat(n),t.next=4,x(a);case 4:return r=t.sent,t.abrupt("return",{name:"Esport Center Tapiola 1-8",availableHours:r,link:a});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),esport2:function(){var t=Object(s.a)(u.a.mark((function t(e){var n,a,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(k.default)(e,"dd.MM.yyyy"),a="https://varaus.esportcenter.fi/varaus/index.php?func=mod_rc_v2&pageId=4&cdate=".concat(n),t.next=4,x(a);case 4:return r=t.sent,t.abrupt("return",{name:"Esport Center Tapiola 10-14",availableHours:r,link:a});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},_=n(93),j=function(){var t=Object(s.a)(u.a.mark((function t(e){var n,a,r,o,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(k.default)(e,"yyyy-MM-dd"),a="https://smashcenter.slsystems.fi/booking/booking-calendar?BookingCalForm%5Bp_laji%5D=1&BookingCalForm%5Bp_pvm%5D=".concat(n,"&BookingCalForm%5Bp_pvm_interval%5D=&BookingCalForm%5Bp_calmode%5D=2&BookingCalForm%5Bp_pvm_custom%5D=Torstai+12.03.2020"),t.next=4,f(a);case 4:return r=t.sent,o=r.data.contents,i=v()(o).find('td[class="s-avail"]').map((function(t,e){return v()(e).text().trim()})).get().filter((function(t){return t.startsWith("K")})).map((function(t){var e=t.split(":");return"".concat(e[0].substring(e[0].length-2),":").concat(e[1].substring(0,2))})),t.abrupt("return",{name:"Smash Center Helsinki",availableHours:Object(_.a)(new Set(i)),link:a});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),E=function(){var t=Object(s.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([h(e),y(e),w(e),B.esport1(e),B.esport2(e),j(e)]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),C=n(122),O=n(90),D=n.n(O),F=n(187),M=n(189),S=n(21),H=["06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00"],I=function(t){var e=t.onChange,n=t.from,a=t.to,o=r.a.useState(n),i=Object(l.a)(o,2),c=i[0],u=i[1],s=r.a.useState(a),p=Object(l.a)(s,2),m=p[0],f=p[1];return r.a.useEffect((function(){e([c,m])}),[c,m,e]),r.a.createElement(F.a,{align:"center",justify:"center",w:"240px"},r.a.createElement(M.a,{size:"sm",value:c,onChange:function(t){return u(t.target.value)},iconSize:"0",w:"55px",p:"0.1rem",style:{textAlignLast:"center"}},H.slice(0,-1).filter((function(t){return t<m})).map((function(t){return r.a.createElement("option",{value:t,key:t},t)}))),r.a.createElement(S.a,{mx:"5px"},"-"),r.a.createElement(M.a,{size:"sm",value:m,onChange:function(t){return f(t.target.value)},iconSize:"0",w:"55px",p:"0.1rem",style:{textAlignLast:"center"}},H.slice(1).filter((function(t){return t>c})).map((function(t){return r.a.createElement("option",{value:t,key:t},t)}))))},T=n(188),z=new URLSearchParams(window.location.search),W=z.get("start"),L=z.get("end"),R=z.get("date")&&Object(C.default)(z.get("date"));var A=function(){var t=r.a.useState(R||new Date),e=Object(l.a)(t,2),n=e[0],a=e[1],o=r.a.useState([W||"06:00",L||"22:00"]),i=Object(l.a)(o,2),c=Object(l.a)(i[0],2),p=c[0],m=c[1],f=i[1],d=r.a.useState([]),v=Object(l.a)(d,2),g=v[0],h=v[1];r.a.useEffect((function(){function t(){return(t=Object(s.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=h,t.next=3,E(e);case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(e){t.apply(this,arguments)}(n)}),[h,n]),r.a.useEffect((function(){var t;window.history.pushState("","","/vapaat-tennisvuorot/?date=".concat((t=n,Object(k.default)(t,"yyyy-MM-dd")),"&start=").concat(p,"&end=").concat(m))}),[n,p,m]);var b=r.a.useCallback((function(t){return f(t)}),[]);return r.a.createElement("div",{style:{maxWidth:"100%",padding:"10px"}},r.a.createElement(T.a,{mb:"2rem"},"Vapaat tennisvuorot"),r.a.createElement(D.a,{selected:n,onChange:function(t){a(t),h([])},minDate:new Date,inline:!0}),r.a.createElement(I,{onChange:b,from:p,to:m}),g.length>0?g.map((function(t){return r.a.createElement("div",{key:t.name},r.a.createElement("a",{href:t.link,target:"_blank",rel:"noopener noreferrer"},r.a.createElement(T.a,{size:"sm",my:"1rem"},t.name)),function(t,e,n){var a=t.availableHours.filter((function(t){return parseInt(t)>=parseInt(e)&&parseInt(t)<=parseInt(n)})).map((function(e){return r.a.createElement("a",{href:t.link,key:e,target:"_blank",rel:"noopener noreferrer"},r.a.createElement("span",{style:{display:"inline-block",margin:"5px",border:"solid",borderWidth:"1px",padding:"3px"}},e))}));return a.length>0?a:r.a.createElement(S.a,null,"Ei vapaita vuoroja.")}(t,p,m))})):r.a.createElement("div",{style:{marginTop:"20px"}},r.a.createElement("h2",null,"Ladataan vapaita vuoroja...")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var J=n(92),P=n(190);i.a.render(r.a.createElement(J.a,null,r.a.createElement(P.a,null),r.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},94:function(t,e,n){t.exports=n(181)},99:function(t,e,n){}},[[94,1,2]]]);
//# sourceMappingURL=main.3b3214f4.chunk.js.map